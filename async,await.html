<!DOCTYPE html>
<html lang="en">

<head>
    <title>ASYNC,AWAIT
    </title>
</head>

<body>

</body>
<script>
    let is_shop_open = false;
    var stocks = {
        fruits: ["banana", "strawberry", "grapes", "cherry"],
        liquid: ["water", "ice"],
        holder: ["cone", "cup", "stick"],
        toppings: ["chocolate", "peanuts"],
    };
    function time(ms) {
        return new Promise((resolve, reject) => {
            if (is_shop_open == true) {
                setTimeout(() => {
                    resolve();
                }
                    , ms);
            }
            else {
                reject(console.log("the customer has left"));
            }
        });
    }
    async function kitchen() {
        try {
            await time(2000)
            console.log(`${stocks.fruits[0]} was selected`)

            await time(0000)
            console.log(`production started`)

            await time(2000)
            console.log("fruit has been chopped")

            await time(1000)
            console.log(`${stocks.liquid[0]} and ${stocks.liquid[1]} added`)

            await time(1000)
            console.log("start the machine")

            await time(2000)
            console.log(`ice cream placed on ${stocks.holder[1]}`)

            await time(3000)
            console.log(`${stocks.toppings[0]} as toppings`)

            await time(2000)
            console.log("Serve Ice Cream")
        }
        catch {
            console.log("the customer left");
        }
        finally {
            console.log("day ended, shop closed");
        }
    }
    kitchen();
</script>

</html>